(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-30f2"],{"8g1+":function(t,e,n){"use strict";var i=n("KepO");n.n(i).a},"8qeF":function(t,e,n){},BNNy:function(t,e,n){"use strict";var i=function(t,e,n,i){return{pattern:"string"==typeof t?new RegExp(t,i):t,message:e||"输入格式不匹配",trigger:n||"change"}},a=function(t,e,n,a){return i("^.{"+t+","+e+"}$",n,"change",a)},r=function(t,e,n){return i("^[0-9]{"+t+","+e+"}$",n)},o=function(t,e,n,i){return{validator:function(i,a,r){""===a&&r(),a+="";var o=parseInt(a);a.length===(o+"").length&&t<=o&&o<=e?r():r(new Error(n||$.tpl("请输入{min} ~ {max}范围内的整数",{min:t,max:e})))},trigger:i||"change"}},s=function(t){return $.tpl("限制{size}位字符输入",{size:t})},d=function(t){return $.tpl("仅支持数字输入，限制最大输入{size}位字符，最小为1位字符",{size:t})},l=/^[0-9]{20}$/,u=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,c={validator:function(t,e,n){""===e&&n(),l.test(e)?n():u.test(e)?n():n(new Error("IP地址格式不正确"))},trigger:"change"},f=/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.((25[0-5]|2[0-4]\d|[01]?\d\d?))$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}((25[0-5]|2[0-4]\d|[01]?\d\d?))\-((25[0-5]|2[0-4]\d|[01]?\d\d?))$/,m={validator:function(t,e,n){""===e&&n();for(var i=e.trim().split(/,|，/),a=0,r=0;r<i.length;r++)f.test(i[r])||a++;a>0?n(new Error("IP格式错误")):n()},trigger:"change"},p=a(1,16,s(16)),h=a(1,18,s(18)),g=a(1,20,s(20)),v=a(1,24,s(24)),b=a(1,25,s(25)),F=a(1,32,s(32)),y=a(1,36,s(36)),I=a(1,40,s(40)),_=a(1,45,s(45)),C=a(1,50,s(50)),w=a(1,64,s(64)),A=a(1,80,s(80)),x=a(1,100,s(100)),N=a(1,128,s(128),"m"),j=a(1,150,s(150)),k=a(1,250,s(250)),E=a(1,1e3,s(1e3)),D=a(1,1500,s(1500)),S=a(1,45,s(45)),z=function(t,e,n,a){return i("^[a-zA-Z0-9/_-]{"+t+","+e+"}$",n,"change",a)}(1,64,"仅允许输入字母、数字、下划线、中线、以及 / 输入，长度范围 1 ~ 64 位"),R=r(1,4,d(4)),T=r(1,5,d(5)),L=r(1,6,d(6)),U=r(1,10,d(10)),O=r(1,11,d(11)),P=r(1,18,d(18)),q=r(1,20,d(20)),Z=r(1,24,d(24)),W=r(1,25,d(25)),B=r(1,32,d(32)),M=r(1,36,d(36)),K=r(1,50,d(50)),G=r(1,64,d(64)),J=o(5,20),V=o(1,99),H=o(1,100),X=o(0,128),Y=o(1,512),Q=o(1,999),tt=o(1,1e3),et=o(1,3e3),nt=o(1,3600),it=o(1,9999),at=o(1,99999),rt=o(5,60,"可输入5-60中的任何数字"),ot=i("^(([1-9]{1}[0-9]{0,6}))$","可输入1—9999999中的任何数字"),st=i("^(([1-9]{1}[0-9]{0,5}))$","可输入1—999999中的任何数字"),dt=i(/^(([^<>()[\]\\.,;:\s@\\"]+(\.[^<>()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"邮箱格式不正确"),lt=i("^(([1-9]{1}[0-9]{0,3})|10000|0)$","可输入0—10000中的任何数字，0的级别最小，10000的级别最大"),ut=i("^(([1-9]\\d{0,4})|0)(\\.\\d{1,2})?$","支持数字输入，支持小数点后2位，最大支持小数点前4位数字输入，最大9999G"),ct=i("^[^&#\\s一-龥]{1,30}$","支持1 ~ 30位，除了中文、 空格、' & '、 '#' 以外的字符输入"),ft=i("^[a-zA-Z0-9_]{1,30}$","密码由数字、字母、下划线组成，长度为1~30位"),mt=i(/^[0-9]{1,20}$/,"请输入1~20位长度的数字"),pt=i(/^\d{13}$|^\d{20}$/,"请输入13或20位长度的数字"),ht=i(/^\d{1,20}$/,"请输入1~20位长度的数字"),gt=i(/^[1-9]\d*$/,"仅支持输入非零整数"),vt=i(/^[1-9]\d?$|^100$/,"仅支持输入非零整数, 数字范围1~100"),$t=o(0,1e3,"仅支持数字输入，默认为4，不输入数字则不做限制，最大可设1000路"),bt=i(/^[0-9\\-]{1,20}$/,"电话号码格式不正确,例如 010-82325561, 支持20位输入"),Ft=i(u,"IP地址格式不正确"),yt=o(1,65535,"端口号请输入1到65535的整数"),It=i("^(([1-9]{1}[0-9]{0,4}))$|^[0-9]{20}$","可输入1—99999中的任何数字，或20位的国标编号"),_t=i("^(([1-9]{1}[0-9]{0,4}))$","可输入1—99999中的任何数字"),Ct=i("^(([1-9]\\d{0,19})|0)(\\.\\d{1,2})?$","支持20位数字，精确到小数点后俩位"),wt=i("^(([1-9]{1}[0-9]{0,2}))$|^1000$","可输入1—1000中的任何数字"),At=i("^([1-9]{1}[0-9]{0,2})$|^([1-2]{1})([0-9]{0,3})$|^3000$","可输入1—3000中的任何数字"),xt=i("^-?(?:(?:180(?:\\.0{1,16})?)|(?:(?:(?:1[0-7]\\d)|(?:[1-9]?\\d))(?:\\.\\d{1,16})?))$","经度范围：-180~180，精确到小数点后16位"),Nt=i("^-?(?:90(?:\\.0{1,16})?|(?:[1-8]?\\d(?:\\.\\d{1,16})?))$","纬度范围：-90~90，精确到小数点后16位"),jt=i("^(([1-9]{1}[0-9]{0,3}))$","可输入1—9999中的任何数字"),kt=i("^(([1-9]\\d{0,9})|0)(\\.\\d{1,2})?$","支持10位数字，精确到小数点后俩位"),Et=i("^([1-9]\\d{0,4})?$","最大支持5位数字输入"),Dt=i("^([1-9]\\d{0,7})?$","最大支持8位数字输入"),St=i("^([0-9a-fA-F]{2}[:-]){5}([0-9a-fA-F]{2})$","MAC地址格式不正确,格式如: 00:A3:19:EF:E4:24"),zt=i(function(){var t="http, https, ftp".split(",").join("|").replace(/\s/g,"");return new RegExp("^(?:(?:"+t+")://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::\\d{2,5})?(?:/[^\\s]*)?$","i")}()),Rt={validator:function(t,e,n){""===e&&n();var i,a=function(){return n(new Error("身份证号填写错误, 请重新填写"))};if(e=e.trim(),/^\d{15}$/.test(e)||/^\d{17}[\dXx]{1}$/.test(e)||a(),i=18===e.length?e.substr(6,8):"19"+e.substr(6,6),function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n))return!1;if(n.length>2||e.length>2||t.length>4)return!1;if(n=parseInt(n,10),e=parseInt(e,10),(t=parseInt(t,10))<1e3||t>9999||e<=0||e>12)return!1;var a=[31,28,31,30,31,30,31,31,30,31,30,31];if((t%400==0||t%100!=0&&t%4==0)&&(a[1]=29),n<=0||n>a[e-1])return!1;if(!0===i){var r=new Date,o=r.getFullYear(),s=r.getMonth(),d=r.getDate();return t<o||t===o&&e-1<s||t===o&&e-1===s&&n<d}return!0}(parseInt(i.substr(0,4),10),parseInt(i.substr(4,2),10),parseInt(i.substr(6,2),10))||a(),18===e.length){for(var r=0,o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],s=0;s<17;s++)r+=parseInt(e.charAt(s),10)*o[s];r=(12-r%11)%11,("X"!==e.charAt(17).toUpperCase()?parseInt(e.charAt(17),10):10)===r?n():a()}n()},trigger:"change"},Tt=function(t,e,n,i){return n=n||"支持"+t+"~"+e+"位的中文、英文（大小写）、整数、下划线、中线、/、. 、空格等输入",{validator:function(i,a,r){void 0!=a&&""!=a||r(),new RegExp("^[a-zA-Z0-9_-/.sΑ-￥]{"+t+","+e+"}$").test(a)||r(new Error(n)),r()},trigger:i||"change"}},Lt=Tt(1,30),Ut=Tt(1,64);e.a={required:function(t,e){return{validator:function(e,n,i){$.isArray(n)?0===n.length?i(new Error(t||"此处为必填项")):i():""===n||void 0===n?i(new Error(t||"此处为必填项")):i()},required:!0,trigger:e||"change"}}(),account64:z,str16:p,str18:h,str20:g,str24:v,str25:b,str32:F,str36:y,str40:I,str45:_,str50:C,str64:w,str80:A,str100:x,str128:N,str150:j,str250:k,str1000:E,str1500:D,strDefault:S,isInt:gt,int4:R,int5:T,int6:L,int10:U,int11:O,int18:P,int20:q,int24:Z,int25:W,int32:B,int36:M,int50:K,int64:G,int1_100:vt,num:o,num20:J,num99:V,num128:X,num100:H,num512:Y,num999:Q,num1000:tt,num3000:et,num3600:nt,num9999:it,num99999:at,name:Tt,name30:Lt,name64:Ut,level:lt,gbId:mt,gbId2:pt,civilCode:ht,chanNo:It,id:Rt,ip:Ft,multiIp:m,ip4gb:c,port:yt,email:dt,maxWay:$t,latitude:Nt,longitude:xt,password:ct,password2:ft,gbIdStep:wt,gbIdTimes:At,serviceSize:Ct,cloudPersize:ut,extraChannelNo:_t,presetPositions:jt,deviceInfoPrice:kt,vodInCount6:Et,trunkInCount6:Et,platformNum:Dt,isNum:{type:"number",message:"必须为数字值"},macAddr:St,phone:bt,uri:zt,ptzIdleTime:rt,projectNumber:ot,nodeNumber:st,remote:function(t){var e=t.id,n=t.name,i=t.api,a=t.apiPrefix,r=t.msg;return{validator:function(t,o,s){if(""===o)s();else{var d={};d[n]=o,e&&(d.id=e),Service[i](d,a).then(function(t){t.data.status?s(new Error(r||t.data.message)):s()},function(t){s(new Error(t.data.message))})}},trigger:"blur"}}}},BZKC:function(t,e,n){"use strict";var i=n("GL4U");n.n(i).a},GL4U:function(t,e,n){},Gd76:function(t,e){t.exports=function(t,e,n){var i=new Blob([t],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,e);else{var a=window.URL.createObjectURL(i),r=document.createElement("a");r.style.display="none",r.href=a,r.setAttribute("download",e),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)}}},"I+Ds":function(t,e,n){"use strict";e.a={data:function(){return{model:{},inline:!1,loading:!1}},props:{title:String},computed:{dialog:function(){return this.find("dialog")},renderInit:function(){return window.formFactoryRender.bind(this,this.fields,{})}},methods:{start:function(t){this.loading=!0,$.fire(t)},end:function(t){var e=this;$.fire(t),setTimeout(function(){e.loading=!1},200)},find:function(t){return $.ref.call(this,t)},closest:function(t){return $.pref.call(this,t)},getForm:function(){return this.$refs.formFactory.$refs.form},validate:function(t,e,n){var i=this;try{this.getForm().validate(function(n,a){if(!n)return e&&e.call(i,a),!1;t&&t.call(i)},n)}catch(t){console.log(t)}},submit:function(t){this.validate(this.saveAjax)},resetForm:function(t){this.getForm().resetFields(t||this.defModel)},close:function(){this.dialog.close(),this.tab&&(this.tab="first")}}}},JlxR:function(t,e,n){"use strict";var i=n("8qeF");n.n(i).a},KepO:function(t,e,n){},kKWf:function(t,e,n){"use strict";var i=n("Gd76"),a=n.n(i);e.a={data:function(){return{downLoading:!1}},methods:{timeRangeChangeFn:function(){var t=this.filter.timeRange,e=[$.getCurDay().from,$.getCurDay().to];return $.isEmptyFn(t)?this.filter.timeRange=["",""]:this.filter.timeRange.every(function(t){return 0==t})?this.filter.timeRange=e:this.filter.timeRange=this.filter.timeRange.map(function(t){return t instanceof Date?$.Date.getTickInSec(t):t})},clearFilter:function(t,e){for(var n in this.filter)this.filter[n]="timeRange"==n?[$.getCurDay().from,$.getCurDay().to]:t&&t[n]||"";e&&e()},query:function(){var t=this;this.jtable.clear(function(){t.jtable.init()})},download:function(t,e){var n=this;this.downLoading=!0,Service[t](e||this.filter).then(function(t){n.downLoading=!1;var e=t.headers["content-disposition"],i=decodeURI(e.match(/filename=(.*)/)[1],"UTF-8");a()(t.data,i)})}}}},s9oT:function(t,e,n){"use strict";n.r(e);var i=n("I+Ds"),a=n("BNNy");var r={name:"EditForm",mixins:[i.a],props:{title:{type:String,default:function(){return""}},flag:{type:String,default:""}},data:function(){return{curNodeFlag:!1,model:{},option:{}}},computed:{fields:function(){return $.formatFinal(function(t){return[{tag:"el-select",name:"siteType",label:"节点类型",rules:[a.a.required],createFunction:"formItem"},{tag:"el-input",name:"siteId",label:"节点ID",tip:["必填，1 ~ 9999 范围内的整数","此标识是本节点与其他节点组成联网域内的节点唯一标识","该标识填写后不可修改，请慎重填写"],data:{props:{disabled:Boolean(t.model.id)}},rules:[a.a.required,a.a.num9999],createFunction:"formItem"},{tag:"el-input",name:"no",label:"节点编号",tip:["必填，1 ~ 9999 范围内的整数","此标识是向对接平台提供参数时的备用参数项，请保持全线路各站点间唯一"],rules:[a.a.required,a.a.num9999],createFunction:"formItem"},{tag:"el-input",name:"name",label:"节点名称",rules:[a.a.required,a.a.str64],createFunction:"formItem"},{tag:"el-input",name:"ip",label:"IP地址",rules:[a.a.required,a.a.ip],createFunction:"formItem"},{tag:"el-select",name:"code",label:"同步类型",createFunction:"formItem"},{tag:"el-input",type:"textarea",name:"descr",label:"说明",tip:"选填项，最多128字符长度输入",rules:[a.a.str128],createFunction:"formItem"}]}(this),$.db.getFinal(),this.option,!0)}},methods:{setData:function(t,e){var n=this;$.initForm({model:t,ajax:[[Service.listNode,{id:t.id},"put"]],events:[{method:"put",fn:function(t){n.data=t[0].data}},{method:"post",fn:function(e){n.data=t}},function(){$.fire(e,n.data)}]})},open:function(t,e){var n=this;this.curNodeFlag=e,this.model=this.defModel=$.modelTpl(this.fields,this.option,{}),this.dialog.open(function(){n.setData(t,function(t){var e={id:t.id};e.id?$.copyValue(e,t,n.fields):e=$.modelTpl(n.fields,n.option,{}),n.model=$.extend(!0,{},e),n.dialog.end()})})},getFormValue:function(){var t=this,e=this.fields,n={id:this.data.id};return $.each(e,function(e,i){i.name&&(n[i.name]=t.model[i.name])}),n},saveAjax:function(){var t=this;this.start(function(){var e=t.getFormValue();$.persist(e,t.curNodeFlag?"setCurNode":"addSite","editSite").then(function(e){t.$message.success("操作成功"),t.close(),t.curNodeFlag?t.$parent.init():t.$parent.$refs.relation.$refs.jtable.init(),t.$store.dispatch("CheckSession")}).finally(t.end)})}}},o=n("KHd+"),s=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nv-dialog",{ref:"dialog",attrs:{title:t.title}},[n("div",{staticClass:"form-content"},[n("form-factory",{ref:"formFactory",attrs:{init:t.renderInit}},[n("el-form-item",{staticClass:"btns"},[n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.submit}},[t._v("确定")]),t._v(" "),n("el-button",{on:{click:t.close}},[t._v("取消")])],1)],1)],1)])},[],!1,null,null,null);s.options.__file="dialog.vue";var d=s.exports,l=n("QbLZ"),u=n.n(l),c=n("P2sY"),f=n.n(c),m=n("WIBD"),p=n("kKWf"),h={mixins:[i.a],props:{title:{type:String,default:""}},data:function(){return{isOpen:!1,model:{},isLoading:!1}},computed:{jtable:function(){return this.$parent.$refs.jtable},fields:function(){return $.formatFinal([{tag:"el-input",name:"ip",label:"数据源站点IP",tip:"必填项，遵循IPv4规范",rules:[a.a.required,a.a.ip],createFunction:"formItem"}],{},this.option,!0)}},methods:{setData:function(t,e){$.fire(e,this.data=t)},closeEvent:function(){this.model={}},open:function(t){var e=this;this.setData(t,function(t){e.model=$.modelTpl(e.fields,e.option,t),e.isOpen=!0})},close:function(){this.isOpen=!1,this.resetForm()},saveAjax:function(t){var e=this;this.isLoading=!0,Service.copySite(this.model).then(function(n){e.isLoading=!1,e.$message.success("处理成功"),e.jtable.init(),$.fire(t)}).finally(function(){e.isLoading=!1,$.fire(t)})},submit:function(){var t=this;this.validate(function(){if(t.isLoading)return!1;t.saveAjax(function(){t.close()})})}}},g=(n("BZKC"),Object(o.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"node-copy-form",attrs:{visible:t.isOpen,"modal-append-to-body":!1,width:"600px",title:"节点信息拷贝"},on:{"update:visible":function(e){t.isOpen=e},close:t.closeEvent}},[n("form-factory",{ref:"formFactory",attrs:{init:t.renderInit}},[n("el-form-item",[n("el-button",{staticClass:"btn2",attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.submit}},[t._v("确定")]),t._v(" "),n("el-button",{staticClass:"btn2",attrs:{size:"small"},on:{click:t.close}},[t._v("取消")])],1)],1)],1)},[],!1,null,null,null));g.options.__file="copyDialog.vue";var v={components:{EditForm:d,CopyDialog:g.exports},mixins:[p.a],data:function(){var t=this;return{filter:{},gridConfig:{selectable:!0,pagination:!0,command:{name:"更多操作",commands:[{value:1,name:"节点信息拷贝"}],handleCommand:function(e){t.copyDialog.open({})}},actions:[{name:"refresh",icon:"icon icon-refresh",title:"刷新",handleFn:function(e){t.refreshFn()}},{name:"create",icon:"el-icon-edit-outline",title:"新建",handleFn:function(e){t.$parent.title="新建节点",t.dialog.open({})}},{name:"batchDel",icon:"el-icon-delete",title:"批量删除",handleFn:function(){t.delFn()}}],listenerWidth:"80px",listeners:[{name:"edit",icon:"el-icon-edit",title:"编辑",handleFn:function(e){t.$parent.title="编辑节点",t.dialog.open(e)}},{name:"delete",icon:"el-icon-delete",title:"删除",handleFn:function(e){t.delFn(e)}}],column:[{type:"index",name:"序号",width:"60",minWidth:"50"},{key:"siteId",name:"节点ID",sortable:!0},{key:"no",name:"节点编号",sortable:!0},{key:"siteType",name:"节点类型",minWidth:"110",sortable:!0,width:"100",format:function(t){return'<i class="icon icon-'+t+'"></i> '+Util.v2str("siteType",t)}},{key:"name",name:"节点名称",minWidth:"120"},{key:"ip",name:"IP地址",minWidth:"110"},{key:"code",name:"同步类型",width:120,minWidth:120,format:function(t){return $.isEmptyFn(t)?"--":""+Util.v2str("syncType",t)}},{key:"code",name:"直属上级",width:100,minWidth:100,format:function(t){return t>0?"是":"--"}},{key:"gbId",name:"国标编号",format:function(t){return $.isEmptyFn(t)?"--":t}}],ajax:{init:function(e){var n=f()({},e,t.filter);return Service.listNode(n).then(function(t){return t})}}}}},computed:u()({},Object(m.mapGetters)(["siteId"]),{dialog:function(){return this.$parent.$refs.dialog},copyDialog:function(){return this.$refs.copyDialog},jtable:function(){return this.$parent.jtable}}),mounted:function(){if(-1==this.siteId)return this.msg("请在【节点管理】页面，至少添加一个站点信息作为当前站点，否则无法继续操作！");this.refreshFn()},methods:{refreshFn:function(){return this.$parent.jtable.init()},delFn:function(t){var e=this,n=[t];if(!t&&!(n=this.$parent.jtable.getChecked()).length)return this.msg("请至少选择一条信息");this.$confirm("确认要删除吗？","提示",{type:"warning"}).then(function(){Service.delSite({ids:n.map(function(t){return t.siteId})}).then(function(t){e.$message.success("操作成功"),e.query()})},function(){return e.$message.warning("操作取消")})}}},b=(n("JlxR"),Object(o.a)(v,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right-content"},[e("nv-table",{ref:"jtable",attrs:{setting:this.gridConfig}}),this._v(" "),e("copy-dialog",{ref:"copyDialog"})],1)},[],!1,null,"559b17a6",null));b.options.__file="relation.vue";var F={components:{EditForm:d,Relation:b.exports},filters:{siteType:function(t){return Util.v2str("siteType",t)}},data:function(){return{title:"新建节点",curModel:null,curNode:[{prop:"id",name:"节点ID"},{prop:"no",name:"节点编号"},{prop:"name",name:"节点名称"},{prop:"siteType",name:"节点类型"},{prop:"ip",name:"IP地址"},{prop:"gbId",name:"国标编号"}]}},computed:{jtable:function(){return this.$refs.relation.$refs.jtable}},mounted:function(){this.init(),this.jtable.init()},methods:{addCurNode:function(){this.$refs.dialog.open({},!0)},editCurNode:function(){this.title="修改节点",this.$refs.dialog.open({id:this.curModel.id},!0)},init:function(){var t=this;return Service.checkSession().then(function(e){var n=e.data.currentSite;Util.isEmptyFn(n)||(t.curModel=n,t.curNode.map(function(t){var e=n[t.prop];Util.isEmptyFn(e)?t.text="--":t.text="siteType"==t.prop?Util.v2str("siteType",e):e}))})}}},y=(n("8g1+"),Object(o.a)(F,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-line clearfix"},[n("div",{staticClass:"left fl"},[n("div",{staticClass:"title"},[t._v("本级节点")]),t._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"ico ico-info-logo"}),t._v(" "),t.curModel?[n("div",{staticClass:"cur-info"},[t._l(t.curNode,function(e){return n("p",{key:e.prop,staticClass:"clearfix"},[n("span",{staticClass:"label"},[t._v(t._s(e.name))]),t._v(" "),n("span",[t._v(" : ")]),t._v(" "),n("span",{staticClass:"text",attrs:{title:e.text},domProps:{innerHTML:t._s(e.text)}})])}),t._v(" "),n("p",{staticClass:"btns"},[n("el-button",{attrs:{size:"mini"},on:{click:t.editCurNode}},[t._v("修改")])],1)],2)]:[n("div",{staticClass:"blank"},[n("span",[t._v("节点信息")]),t._v(" "),n("span",[t._v("尚未设置本级节点")]),t._v(" "),n("a",{staticClass:"btn-add",on:{click:t.addCurNode}},[t._v("点击添加 >> ")])])]],2)]),t._v(" "),n("div",{staticClass:"right fr"},[n("div",{staticClass:"title"},[t._v("节点关系")]),t._v(" "),n("relation",{ref:"relation"}),t._v(" "),n("edit-form",{ref:"dialog",attrs:{title:t.title}})],1)])},[],!1,null,null,null));y.options.__file="index.vue";e.default=y.exports}}]);