(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-37a9"],{"4xPm":function(t,e,n){},BNNy:function(t,e,n){"use strict";var r=function(t,e,n,r){return{pattern:"string"==typeof t?new RegExp(t,r):t,message:e||"输入格式不匹配",trigger:n||"change"}},i=function(t,e,n,i){return r("^.{"+t+","+e+"}$",n,"change",i)},a=function(t,e,n){return r("^[0-9]{"+t+","+e+"}$",n)},o=function(t,e,n,r){return{validator:function(r,i,a){""===i&&a(),i+="";var o=parseInt(i);i.length===(o+"").length&&t<=o&&o<=e?a():a(new Error(n||$.tpl("请输入{min} ~ {max}范围内的整数",{min:t,max:e})))},trigger:r||"change"}},s=function(t){return $.tpl("限制{size}位字符输入",{size:t})},d=function(t){return $.tpl("仅支持数字输入，限制最大输入{size}位字符，最小为1位字符",{size:t})},u=/^[0-9]{20}$/,l=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,c={validator:function(t,e,n){""===e&&n(),u.test(e)?n():l.test(e)?n():n(new Error("IP地址格式不正确"))},trigger:"change"},f=/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.((25[0-5]|2[0-4]\d|[01]?\d\d?))$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}((25[0-5]|2[0-4]\d|[01]?\d\d?))\-((25[0-5]|2[0-4]\d|[01]?\d\d?))$/,m={validator:function(t,e,n){""===e&&n();for(var r=e.trim().split(/,|，/),i=0,a=0;a<r.length;a++)f.test(r[a])||i++;i>0?n(new Error("IP格式错误")):n()},trigger:"change"},p=i(1,16,s(16)),g=i(1,18,s(18)),h=i(1,20,s(20)),v=i(1,24,s(24)),b=i(1,25,s(25)),F=i(1,32,s(32)),y=i(1,36,s(36)),I=i(1,40,s(40)),A=i(1,45,s(45)),w=i(1,50,s(50)),S=i(1,64,s(64)),D=i(1,80,s(80)),x=i(1,100,s(100)),z=i(1,128,s(128),"m"),E=i(1,150,s(150)),_=i(1,250,s(250)),j=i(1,1e3,s(1e3)),k=i(1,1500,s(1500)),N=i(1,45,s(45)),P=function(t,e,n,i){return r("^[a-zA-Z0-9/_-]{"+t+","+e+"}$",n,"change",i)}(1,64,"仅允许输入字母、数字、下划线、中线、以及 / 输入，长度范围 1 ~ 64 位"),C=a(1,4,d(4)),T=a(1,5,d(5)),Z=a(1,6,d(6)),B=a(1,10,d(10)),M=a(1,11,d(11)),O=a(1,18,d(18)),R=a(1,20,d(20)),W=a(1,24,d(24)),q=a(1,25,d(25)),G=a(1,32,d(32)),J=a(1,36,d(36)),V=a(1,50,d(50)),X=a(1,64,d(64)),Y=o(5,20),H=o(1,99),K=o(1,100),L=o(0,128),Q=o(1,512),U=o(1,999),tt=o(1,1e3),et=o(1,3e3),nt=o(1,3600),rt=o(1,9999),it=o(1,99999),at=o(5,60,"可输入5-60中的任何数字"),ot=r("^(([1-9]{1}[0-9]{0,6}))$","可输入1—9999999中的任何数字"),st=r("^(([1-9]{1}[0-9]{0,5}))$","可输入1—999999中的任何数字"),dt=r(/^(([^<>()[\]\\.,;:\s@\\"]+(\.[^<>()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"邮箱格式不正确"),ut=r("^(([1-9]{1}[0-9]{0,3})|10000|0)$","可输入0—10000中的任何数字，0的级别最小，10000的级别最大"),lt=r("^(([1-9]\\d{0,4})|0)(\\.\\d{1,2})?$","支持数字输入，支持小数点后2位，最大支持小数点前4位数字输入，最大9999G"),ct=r("^[^&#\\s一-龥]{1,30}$","支持1 ~ 30位，除了中文、 空格、' & '、 '#' 以外的字符输入"),ft=r("^[a-zA-Z0-9_]{1,30}$","密码由数字、字母、下划线组成，长度为1~30位"),mt=r(/^[0-9]{1,20}$/,"请输入1~20位长度的数字"),pt=r(/^\d{13}$|^\d{20}$/,"请输入13或20位长度的数字"),gt=r(/^\d{1,20}$/,"请输入1~20位长度的数字"),ht=r(/^[1-9]\d*$/,"仅支持输入非零整数"),vt=r(/^[1-9]\d?$|^100$/,"仅支持输入非零整数, 数字范围1~100"),$t=o(0,1e3,"仅支持数字输入，默认为4，不输入数字则不做限制，最大可设1000路"),bt=r(/^[0-9\\-]{1,20}$/,"电话号码格式不正确,例如 010-82325561, 支持20位输入"),Ft=r(l,"IP地址格式不正确"),yt=o(1,65535,"端口号请输入1到65535的整数"),It=r("^(([1-9]{1}[0-9]{0,4}))$|^[0-9]{20}$","可输入1—99999中的任何数字，或20位的国标编号"),At=r("^(([1-9]{1}[0-9]{0,4}))$","可输入1—99999中的任何数字"),wt=r("^(([1-9]\\d{0,19})|0)(\\.\\d{1,2})?$","支持20位数字，精确到小数点后俩位"),St=r("^(([1-9]{1}[0-9]{0,2}))$|^1000$","可输入1—1000中的任何数字"),Dt=r("^([1-9]{1}[0-9]{0,2})$|^([1-2]{1})([0-9]{0,3})$|^3000$","可输入1—3000中的任何数字"),xt=r("^-?(?:(?:180(?:\\.0{1,16})?)|(?:(?:(?:1[0-7]\\d)|(?:[1-9]?\\d))(?:\\.\\d{1,16})?))$","经度范围：-180~180，精确到小数点后16位"),zt=r("^-?(?:90(?:\\.0{1,16})?|(?:[1-8]?\\d(?:\\.\\d{1,16})?))$","纬度范围：-90~90，精确到小数点后16位"),Et=r("^(([1-9]{1}[0-9]{0,3}))$","可输入1—9999中的任何数字"),_t=r("^(([1-9]\\d{0,9})|0)(\\.\\d{1,2})?$","支持10位数字，精确到小数点后俩位"),jt=r("^([1-9]\\d{0,4})?$","最大支持5位数字输入"),kt=r("^([1-9]\\d{0,7})?$","最大支持8位数字输入"),Nt=r("^([0-9a-fA-F]{2}[:-]){5}([0-9a-fA-F]{2})$","MAC地址格式不正确,格式如: 00:A3:19:EF:E4:24"),Pt=r(function(){var t="http, https, ftp".split(",").join("|").replace(/\s/g,"");return new RegExp("^(?:(?:"+t+")://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::\\d{2,5})?(?:/[^\\s]*)?$","i")}()),Ct={validator:function(t,e,n){""===e&&n();var r,i=function(){return n(new Error("身份证号填写错误, 请重新填写"))};if(e=e.trim(),/^\d{15}$/.test(e)||/^\d{17}[\dXx]{1}$/.test(e)||i(),r=18===e.length?e.substr(6,8):"19"+e.substr(6,6),function(t,e,n,r){if(isNaN(t)||isNaN(e)||isNaN(n))return!1;if(n.length>2||e.length>2||t.length>4)return!1;if(n=parseInt(n,10),e=parseInt(e,10),(t=parseInt(t,10))<1e3||t>9999||e<=0||e>12)return!1;var i=[31,28,31,30,31,30,31,31,30,31,30,31];if((t%400==0||t%100!=0&&t%4==0)&&(i[1]=29),n<=0||n>i[e-1])return!1;if(!0===r){var a=new Date,o=a.getFullYear(),s=a.getMonth(),d=a.getDate();return t<o||t===o&&e-1<s||t===o&&e-1===s&&n<d}return!0}(parseInt(r.substr(0,4),10),parseInt(r.substr(4,2),10),parseInt(r.substr(6,2),10))||i(),18===e.length){for(var a=0,o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],s=0;s<17;s++)a+=parseInt(e.charAt(s),10)*o[s];a=(12-a%11)%11,("X"!==e.charAt(17).toUpperCase()?parseInt(e.charAt(17),10):10)===a?n():i()}n()},trigger:"change"},Tt=function(t,e,n,r){return n=n||"支持"+t+"~"+e+"位的中文、英文（大小写）、整数、下划线、中线、/、. 、空格等输入",{validator:function(r,i,a){void 0!=i&&""!=i||a(),new RegExp("^[a-zA-Z0-9_-/.sΑ-￥]{"+t+","+e+"}$").test(i)||a(new Error(n)),a()},trigger:r||"change"}},Zt=Tt(1,30),Bt=Tt(1,64);e.a={required:function(t,e){return{validator:function(e,n,r){$.isArray(n)?0===n.length?r(new Error(t||"此处为必填项")):r():""===n||void 0===n?r(new Error(t||"此处为必填项")):r()},required:!0,trigger:e||"change"}}(),account64:P,str16:p,str18:g,str20:h,str24:v,str25:b,str32:F,str36:y,str40:I,str45:A,str50:w,str64:S,str80:D,str100:x,str128:z,str150:E,str250:_,str1000:j,str1500:k,strDefault:N,isInt:ht,int4:C,int5:T,int6:Z,int10:B,int11:M,int18:O,int20:R,int24:W,int25:q,int32:G,int36:J,int50:V,int64:X,int1_100:vt,num:o,num20:Y,num99:H,num128:L,num100:K,num512:Q,num999:U,num1000:tt,num3000:et,num3600:nt,num9999:rt,num99999:it,name:Tt,name30:Zt,name64:Bt,level:ut,gbId:mt,gbId2:pt,civilCode:gt,chanNo:It,id:Ct,ip:Ft,multiIp:m,ip4gb:c,port:yt,email:dt,maxWay:$t,latitude:zt,longitude:xt,password:ct,password2:ft,gbIdStep:St,gbIdTimes:Dt,serviceSize:wt,cloudPersize:lt,extraChannelNo:At,presetPositions:Et,deviceInfoPrice:_t,vodInCount6:jt,trunkInCount6:jt,platformNum:kt,isNum:{type:"number",message:"必须为数字值"},macAddr:Nt,phone:bt,uri:Pt,ptzIdleTime:at,projectNumber:ot,nodeNumber:st,remote:function(t){var e=t.id,n=t.name,r=t.api,i=t.apiPrefix,a=t.msg;return{validator:function(t,o,s){if(""===o)s();else{var d={};d[n]=o,e&&(d.id=e),Service[r](d,i).then(function(t){t.data.status?s(new Error(a||t.data.message)):s()},function(t){s(new Error(t.data.message))})}},trigger:"blur"}}}},"I+Ds":function(t,e,n){"use strict";e.a={data:function(){return{model:{},inline:!1,loading:!1}},props:{title:String},computed:{dialog:function(){return this.find("dialog")},renderInit:function(){return window.formFactoryRender.bind(this,this.fields,{})}},methods:{start:function(t){this.loading=!0,$.fire(t)},end:function(t){var e=this;$.fire(t),setTimeout(function(){e.loading=!1},200)},find:function(t){return $.ref.call(this,t)},closest:function(t){return $.pref.call(this,t)},getForm:function(){return this.$refs.formFactory.$refs.form},validate:function(t,e,n){var r=this;try{this.getForm().validate(function(n,i){if(!n)return e&&e.call(r,i),!1;t&&t.call(r)},n)}catch(t){console.log(t)}},submit:function(t){this.validate(this.saveAjax)},resetForm:function(t){this.getForm().resetFields(t||this.defModel)},close:function(){this.dialog.close(),this.tab&&(this.tab="first")}}}},ezgu:function(t,e,n){"use strict";var r=n("4xPm");n.n(r).a},"itr+":function(t,e,n){"use strict";n.r(e);var r=n("QbLZ"),i=n.n(r),a=n("P2sY"),o=n.n(a),s=n("I+Ds"),d=n("BNNy"),u={nname:"EditForm",mixins:[s.a],props:{title:{type:String,default:""},flag:{type:String,default:""}},data:function(){return{model:{},option:{}}},computed:{jtable:function(){return this.closest("jtable")},fields:function(){return $.formatFinal([{tag:"el-input",label:"驱动ID",name:"id",data:{props:{disabled:!0}},createFunction:"formItem"},{tag:"el-input",label:"驱动名称",name:"name",data:{props:{disabled:!0}},createFunction:"formItem"},{tag:"el-input",label:"驱动类型",name:"driverType",data:{props:{disabled:!0}},createFunction:"formItem"},{tag:"el-input",label:"厂家",name:"provider",data:{props:{disabled:!0}},createFunction:"formItem"},{tag:"el-input",label:"型号",name:"style",data:{props:{disabled:!0}},createFunction:"formItem"},{tag:"el-input",label:"默认用户名",name:"username",rules:[d.a.str64],createFunction:"formItem"},{tag:"el-input",label:"默认密码",name:"password",rules:[d.a.password],createFunction:"formItem"},{tag:"el-input",name:"port",label:"默认端口",tip:"选填项，请输入1 ~ 65535范围内整数",rules:[d.a.port],createFunction:"formItem"},{tag:"el-input",name:"driverParam",label:"驱动参数",rules:[d.a.str64],createFunction:"formItem"},{tag:"el-input",name:"secondParam",label:"辅码流参数",rules:[d.a.str64],createFunction:"formItem"},{tag:"el-input",name:"monitorParam",label:"电视墙上墙参数",rules:[d.a.str64],createFunction:"formItem"},{tag:"el-input",name:"recordParam",label:"录像参数",rules:[d.a.str64],createFunction:"formItem"},{tag:"el-input",name:"otherParam",label:"其他参数",rules:[d.a.str64],createFunction:"formItem"},{tag:"el-input",name:"descr",label:"描述",tip:"选填项，最多128字符长度输入",rules:[d.a.str128],createFunction:"formItem"}],null,this.option,!1)}},methods:{setData:function(t,e){var n=this;$.initForm({model:t,ajax:[[Service.listDriver,{driverType:t.driverType,id:t.id},"put"]],events:[function(t){n.option={}},{method:"put",fn:function(t){n.data=t[0].data}},{method:"post",fn:function(e){n.data=t}},function(){$.fire(e,n.data)}]})},open:function(t){var e=this;this.model=this.defModel=$.modelTpl(this.fields),this.setData(t,function(t){e.dialog.open(function(){var n=t.id;n=$.modelTpl(e.fields,e.option,t),e.model=$.extend(!0,{},n),e.dialog.end()})})},getFormValue:function(){var t=this,e=this.fields,n={id:this.data.id};return $.each(e,function(e,r){r.name&&(n[r.name]=t.model[r.name])}),n},submit:function(){var t=this;this.validate(function(){t.saveAjax(function(){t.dialog.close()})})},saveAjax:function(){var t=this;this.start(function(){var e=t.getFormValue();Service.editDriver(e).then(function(e){t.$message.success("操作成功"),t.close(),t.jtable.init()}).finally(t.end)})}}},l=(n("ezgu"),n("KHd+")),c=Object(l.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nv-dialog",{ref:"dialog",staticClass:"driver-dialog",attrs:{title:t.title}},[n("div",{staticClass:"form-content"},[n("form-factory",{ref:"formFactory",attrs:{init:t.renderInit}},[n("el-form-item",[n("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.submit}},[t._v("确定")]),t._v(" "),n("el-button",{on:{click:t.close}},[t._v("取消")])],1)],1)],1)])},[],!1,null,null,null);c.options.__file="dialog.vue";var f=c.exports,m=n("WIBD"),p={components:{EditForm:f},data:function(){var t=this;return{DriverSync:!1,title:"",gridConfig:{selectable:!1,pagination:!0,listenerWidth:"100px",actions:[{name:"refresh",icon:"icon icon-refresh",title:"刷新",handleFn:function(e){t.refreshFn()}}],listeners:[{name:"edit",icon:"el-icon-edit",title:"编辑",handleFn:function(e){t.title="编辑驱动",t.dialog.open(e)}}],column:[{key:"id",name:"驱动ID"},{key:"name",name:"驱动名",sortable:!0},{key:"driverType",name:"驱动类型",sortable:!0},{key:"provider",name:"厂家",sortable:!0},{key:"style",name:"型号"},{key:"username",name:"默认用户名"},{key:"password",name:"默认密码"},{key:"port",name:"默认端口",width:"100"},{key:"descr",name:"描述"}],ajax:{init:function(e){var n=o()({},e,t.filter);return Service.listDriver(n).then(function(t){return t})}}}}},computed:i()({},Object(m.mapGetters)(["siteType"]),{jtable:function(){return this.$refs.jtable},dialog:function(){return this.$refs.dialog},isSuper:function(){return"OCC"==this.siteType}}),mounted:function(){this.refreshFn(),this.setDriverSync()},methods:{setDriverSync:function(){var t=this;Service.getDriverSync().then(function(e){return t.DriverSync=Boolean(parseInt(e.data.DriverSync))})},refreshFn:function(){this.jtable.init()},syncFn:function(t){var e=this,n=this.$createElement,r=n("div",[n("p","驱动参数的错误修改，可能导致本站无法查看！！！"),n("p","是否继续操作？")]);this.$confirm(r,"提示",{type:"warning"}).then(function(){Service.setDriverSync({DriverSync:t?1:0}).then(function(t){return e.msg("设置成功")})},function(){e.DriverSync=!t})}}},g=Object(l.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sys-drive"},[n("nv-table",{ref:"jtable",attrs:{setting:t.gridConfig}},[n("template",{slot:"filter"},[t.isSuper?t._e():n("el-checkbox",{on:{change:t.syncFn},model:{value:t.DriverSync,callback:function(e){t.DriverSync=e},expression:"DriverSync"}},[t._v("【是否同步上级的驱动信息】")])],1)],2),t._v(" "),n("edit-form",{ref:"dialog",attrs:{title:t.title}})],1)},[],!1,null,null,null);g.options.__file="index.vue";e.default=g.exports}}]);