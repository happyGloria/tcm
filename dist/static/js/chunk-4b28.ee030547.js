(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4b28"],{"4/l0":function(e,t,i){"use strict";var n=i("KzrG");i.n(n).a},KzrG:function(e,t,i){},lcaP:function(e,t,i){"use strict";i.r(t);var n=i("P2sY"),a=i.n(n);function r(e){var t=[],i=[{type:"index",name:"序号",width:"60",minWidth:"50"},{key:"gbId",name:"国标编号"},{key:"name",name:"child"==e?"下级名称":"上级名称"},{key:"ip",name:"IP地址"},{key:"regTime",name:"注册时间",format:function(e){return e||"--"}},{key:"expires",name:"注册有效期 (单位:秒)",format:function(e){return e||"--"}}],n=[{key:"status",htmlFlag:!0,align:"center",width:180,minWidth:180,name:'<em style="margin-right: 10px;">状态</em>\n        <em class="green"><i class="circle"></i><i>在线</i></em>\n        <em class="red"><i class="circle"></i><i>离线</i></em>',format:function(e){return'<span class="'+("ON"==e?"green":"red")+'">\n            <i class="circle"></i>\n            <i>'+$.v2str("status",e)+"</i>\n          </span>"}}],a=[{key:"type",name:"设备类型",format:function(e){return"<i>"+$.v2str("deviceType",e)+"</i>"}}];switch(e){case"parent":case"user":t=[].concat(i,n);break;case"child":t=[].concat(i,a,n)}return t}var l=$.db.getConsts().deviceType.filter(function(e){return"Camera"!==e.parentId}).filter(function(e){return"Server"!==e.parentId}).filter(function(e){return"Keyboard"!==e.id}),s={data:function(){var e=this;return{selectParam:"",type:"",timer:null,interval:0,intervalOpts:[{value:0,label:"不自动刷新"},{value:3,label:"3秒"},{value:5,label:"5秒"},{value:10,label:"10秒"}],deviceOpts:l,deviceType:"parent",gridConfig:{selectable:!1,pagination:!0,actions:[{name:"refresh",icon:"icon icon-refresh",title:"刷新",handleFn:function(t){e.refreshFn()}}],column:r("parent"),ajax:{init:function(t){var i=a()({},t,{deviceType:e.deviceType,selectParam:e.selectParam});return"child"==e.deviceType&&a()(i,{type:e.type}),Service.listGBStatus(i).then(function(e){return e})}}}}},computed:{jtable:function(){return this.$refs.jtable}},watch:{interval:function(e){var t=this;0==e?clearInterval(this.timer):this.timer=setInterval(function(){t.refreshFn()},1e3*e)}},mounted:function(){this.timer&&clearInterval(this.timer),this.deviceType=this.$route.name.split("-")[1],this.selectParam="",this.interval=0,this.jtable.setColumn(r(this.deviceType)),this.refreshFn()},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{refreshFn:function(){this.jtable.init()}}},c=(i("4/l0"),i("KHd+")),o=Object(c.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"gb-status"},[i("nv-table",{ref:"jtable",attrs:{setting:e.gridConfig}},[i("div",{attrs:{slot:"extAction"},slot:"extAction"},[i("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.interval,callback:function(t){e.interval=t},expression:"interval"}},e._l(e.intervalOpts,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("template",{slot:"filter"},[i("div",{staticClass:"clearfix"},["child"==e.deviceType?i("div",{staticClass:"fl",staticStyle:{"margin-right":"10px"}},[i("span",{staticStyle:{"font-size":"12px","margin-right":"5px"}},[e._v("设备类型")]),e._v(" "),i("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.deviceOpts,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1):e._e(),e._v(" "),i("div",{staticClass:"fl",staticStyle:{"margin-right":"10px"}},[i("el-input",{staticClass:"field-search",attrs:{placeholder:"请输入查询条件"},model:{value:e.selectParam,callback:function(t){e.selectParam=t},expression:"selectParam"}},[i("el-tooltip",{attrs:{slot:"prefix",content:"检索范围：IP、名称",effect:"light",placement:"top-end"},slot:"prefix"},[i("i",{staticClass:"icon icon-qs"})])],1)],1),e._v(" "),i("div",{staticClass:"fl"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.refreshFn}},[i("i",{staticClass:"el-icon-search"}),e._v(" "),i("span",[e._v("查询")])])],1)])])],2)],1)},[],!1,null,null,null);o.options.__file="index.vue";t.default=o.exports}}]);