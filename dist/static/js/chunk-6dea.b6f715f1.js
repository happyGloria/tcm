(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6dea"],{"5R/N":function(e,t,a){"use strict";var n=a("tMv2");a.n(n).a},A9nf:function(e,t,a){"use strict";a.r(t);var n=a("I+Ds"),r=a("BNNy"),i=a("PoBe"),d={name:"LocalGb",mixins:[n.a],data:function(){return{model:{},loading:!1,inline:!0}},computed:{fields:function(){return $.formatFinal(function(e){var t=function(e){return!Number(e)};return[{tag:"el-switch",name:"flag",label:"启用国标模块",default:0,data:{props:{activeValue:1,inactiveValue:0,inactiveColor:"red",activeText:"开",inactiveText:"关"}},change:function(t){var a=e.$createElement,n=a("div",{class:"nv-message-box"},[a("p","如果关闭，监控系统将重启！")]);t?e.model.flag=t:e.$confirm(n,"提示",{type:"warning"}).then(function(){e.model.flag=t,Service.setGB(e.getFormValue()).then(function(t){$.db.setBJVMS(e.model.bjVMS),e.$message.success("操作成功"),setTimeout(function(){location.reload()},1e3)}).catch(function(e){console.log(e)})},function(){e.model.flag=!t,e.$message.warning("操作取消")})},createFunction:"formItem"},{tag:"el-switch",name:"bjVMS",label:"北京VMS",default:0,data:{props:{activeValue:1,inactiveValue:0,inactiveColor:"red",activeText:"开",inactiveText:"关"}},change:function(t){e.model.bjVMS=t},createFunction:"formItem"},{tag:"el-input",name:"gbId",label:"国标编号",rules:[r.a.required,r.a.gbId2],data:{props:{disabled:t(e.model.flag)}},createFunction:"formItem"},{tag:"el-input",name:"gbName",label:"名称",rules:[r.a.required,r.a.str64],data:{props:{disabled:t(e.model.flag)}},createFunction:"formItem"},{tag:"el-input",name:"password",label:"密码",data:{props:{disabled:t(e.model.flag)}},rules:[r.a.required,r.a.password],createFunction:"formItem"},{tag:"el-input",name:"civil",label:"行政区划编号",data:{props:{disabled:t(e.model.flag)}},rules:[r.a.required,r.a.civilCode],createFunction:"formItem"},{tag:"el-input",name:"ip",label:"IP地址",data:{props:{disabled:t(e.model.flag)}},rules:[r.a.required,r.a.ip],createFunction:"formItem"},{tag:"el-input",name:"port",label:"端口",default:"5060",data:{props:{disabled:t(e.model.flag)}},rules:[r.a.required,r.a.port],createFunction:"formItem"},{tag:"el-select",name:"registerWay",label:"注册方式",default:"1",data:{props:{disabled:t(e.model.flag)}},rules:[r.a.required],createFunction:"formItem"},{tag:"el-input",name:"httpPort",label:"http服务端口",default:"8080",data:{props:{disabled:t(e.model.flag)}},rules:[r.a.required,r.a.port],createFunction:"formItem"},{tag:"el-input",name:"number",label:"每次传送数量(TCP)",default:"10000",data:{props:{disabled:t(e.model.flag)}},rules:[r.a.required,r.a.num99999],createFunction:"formItem"},{tag:"el-switch",name:"keepAlive",label:"是否检测心跳",default:1,data:{props:{activeValue:1,inactiveValue:0,activeText:"开",inactiveText:"关",disabled:t(e.model.flag)}},createFunction:"formItem"},{tag:"el-input",name:"interval",label:"心跳间隔时间",default:"15",rules:[r.a.num3600],data:{props:{disabled:t(e.model.flag)}},show:function(){return 1==e.model.keepAlive},children:[{tag:"template",data:{slot:"append"},children:["秒"]}],createFunction:"formItem"},{tag:"el-input",name:"times",label:"心跳检测次数",default:"3",rules:[r.a.num100],data:{props:{disabled:t(e.model.flag)}},show:function(){return 1==e.model.keepAlive},children:[{tag:"template",data:{slot:"append"},children:["次"]}],createFunction:"formItem"},{tag:"el-input",name:"owner",label:"所有者",rules:[r.a.str64],data:{props:{disabled:t(e.model.flag)}},createFunction:"formItem"},{tag:"el-input",name:"address",label:"安装地址",rules:[r.a.str64],data:{props:{disabled:t(e.model.flag)}},createFunction:"formItem"},{tag:"el-input",name:"backup",label:"备用中心国标编号",rules:[r.a.gbId2],data:{props:{disabled:t(e.model.flag)}},createFunction:"formItem"},{tag:"el-switch",name:"tcp",label:"是否采用TCP",default:1,data:{props:{activeValue:1,inactiveValue:0,activeText:"开",inactiveText:"关",disabled:t(e.model.flag)}},change:function(e){this.model.tcp=e},createFunction:"formItem"}]}(this),i.a.gb,this.option,!1)}},mounted:function(){this.init()},methods:{init:function(){var e=this;return this.loading=!0,Service.getGB().then(function(t){e.loading=!1,e.model=$.copyValue_2({},t.data,e.fields)})},getFormValue:function(){var e={},t=this.model;return $.for(this.fields,function(a){!a.name||a.show&&!a.show()||(e[a.name]=t[a.name])}),e},submit:function(){var e=this;0==this.model.flag?this.saveAjax(function(){e.close()}):this.validate(function(){e.saveAjax(function(){e.close()})})},saveAjax:function(){var e=this;this.start(function(){var t=e.getFormValue();Service.setGB(t).then(function(a){$.db.setBJVMS(t.bjVMS),e.$message.success("操作成功"),setTimeout(function(){return location.reload()},1e3)},function(){e.loading=!1}).catch(function(e){console.log(e)}).finally(function(){e.loading=!1})})},close:function(){var e=this;this.init().then(function(){return e.$message.warning("操作取消")})}}},o=(a("5R/N"),a("KHd+")),l=Object(o.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"page-gb"},[a("form-factory",{ref:"formFactory",attrs:{init:e.renderInit,inline:!0}},[a("el-form-item",[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="index.vue";t.default=l.exports},BNNy:function(e,t,a){"use strict";var n=function(e,t,a,n){return{pattern:"string"==typeof e?new RegExp(e,n):e,message:t||"输入格式不匹配",trigger:a||"change"}},r=function(e,t,a,r){return n("^.{"+e+","+t+"}$",a,"change",r)},i=function(e,t,a){return n("^[0-9]{"+e+","+t+"}$",a)},d=function(e,t,a,n){return{validator:function(n,r,i){""===r&&i(),r+="";var d=parseInt(r);r.length===(d+"").length&&e<=d&&d<=t?i():i(new Error(a||$.tpl("请输入{min} ~ {max}范围内的整数",{min:e,max:t})))},trigger:n||"change"}},o=function(e){return $.tpl("限制{size}位字符输入",{size:e})},l=function(e){return $.tpl("仅支持数字输入，限制最大输入{size}位字符，最小为1位字符",{size:e})},s=/^[0-9]{20}$/,u=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,c={validator:function(e,t,a){""===t&&a(),s.test(t)?a():u.test(t)?a():a(new Error("IP地址格式不正确"))},trigger:"change"},f=/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.((25[0-5]|2[0-4]\d|[01]?\d\d?))$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}((25[0-5]|2[0-4]\d|[01]?\d\d?))\-((25[0-5]|2[0-4]\d|[01]?\d\d?))$/,m={validator:function(e,t,a){""===t&&a();for(var n=t.trim().split(/,|，/),r=0,i=0;i<n.length;i++)f.test(n[i])||r++;r>0?a(new Error("IP格式错误")):a()},trigger:"change"},g=r(1,16,o(16)),p=r(1,18,o(18)),h=r(1,20,o(20)),v=r(1,24,o(24)),b=r(1,25,o(25)),F=r(1,32,o(32)),I=r(1,36,o(36)),A=r(1,40,o(40)),w=r(1,45,o(45)),x=r(1,50,o(50)),z=r(1,64,o(64)),N=r(1,80,o(80)),V=r(1,100,o(100)),y=r(1,128,o(128),"m"),E=r(1,150,o(150)),S=r(1,250,o(250)),T=r(1,1e3,o(1e3)),C=r(1,1500,o(1500)),M=r(1,45,o(45)),P=function(e,t,a,r){return n("^[a-zA-Z0-9/_-]{"+e+","+t+"}$",a,"change",r)}(1,64,"仅允许输入字母、数字、下划线、中线、以及 / 输入，长度范围 1 ~ 64 位"),_=i(1,4,l(4)),j=i(1,5,l(5)),q=i(1,6,l(6)),k=i(1,10,l(10)),Z=i(1,11,l(11)),B=i(1,18,l(18)),R=i(1,20,l(20)),D=i(1,24,l(24)),G=i(1,25,l(25)),J=i(1,32,l(32)),W=i(1,36,l(36)),X=i(1,50,l(50)),H=i(1,64,l(64)),K=d(5,20),L=d(1,99),O=d(1,100),U=d(0,128),Y=d(1,512),Q=d(1,999),ee=d(1,1e3),te=d(1,3e3),ae=d(1,3600),ne=d(1,9999),re=d(1,99999),ie=d(5,60,"可输入5-60中的任何数字"),de=n("^(([1-9]{1}[0-9]{0,6}))$","可输入1—9999999中的任何数字"),oe=n("^(([1-9]{1}[0-9]{0,5}))$","可输入1—999999中的任何数字"),le=n(/^(([^<>()[\]\\.,;:\s@\\"]+(\.[^<>()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"邮箱格式不正确"),se=n("^(([1-9]{1}[0-9]{0,3})|10000|0)$","可输入0—10000中的任何数字，0的级别最小，10000的级别最大"),ue=n("^(([1-9]\\d{0,4})|0)(\\.\\d{1,2})?$","支持数字输入，支持小数点后2位，最大支持小数点前4位数字输入，最大9999G"),ce=n("^[^&#\\s一-龥]{1,30}$","支持1 ~ 30位，除了中文、 空格、' & '、 '#' 以外的字符输入"),fe=n("^[a-zA-Z0-9_]{1,30}$","密码由数字、字母、下划线组成，长度为1~30位"),me=n(/^[0-9]{1,20}$/,"请输入1~20位长度的数字"),ge=n(/^\d{13}$|^\d{20}$/,"请输入13或20位长度的数字"),pe=n(/^\d{1,20}$/,"请输入1~20位长度的数字"),he=n(/^[1-9]\d*$/,"仅支持输入非零整数"),ve=n(/^[1-9]\d?$|^100$/,"仅支持输入非零整数, 数字范围1~100"),$e=d(0,1e3,"仅支持数字输入，默认为4，不输入数字则不做限制，最大可设1000路"),be=n(/^[0-9\\-]{1,20}$/,"电话号码格式不正确,例如 010-82325561, 支持20位输入"),Fe=n(u,"IP地址格式不正确"),Ie=d(1,65535,"端口号请输入1到65535的整数"),Ae=n("^(([1-9]{1}[0-9]{0,4}))$|^[0-9]{20}$","可输入1—99999中的任何数字，或20位的国标编号"),we=n("^(([1-9]{1}[0-9]{0,4}))$","可输入1—99999中的任何数字"),xe=n("^(([1-9]\\d{0,19})|0)(\\.\\d{1,2})?$","支持20位数字，精确到小数点后俩位"),ze=n("^(([1-9]{1}[0-9]{0,2}))$|^1000$","可输入1—1000中的任何数字"),Ne=n("^([1-9]{1}[0-9]{0,2})$|^([1-2]{1})([0-9]{0,3})$|^3000$","可输入1—3000中的任何数字"),Ve=n("^-?(?:(?:180(?:\\.0{1,16})?)|(?:(?:(?:1[0-7]\\d)|(?:[1-9]?\\d))(?:\\.\\d{1,16})?))$","经度范围：-180~180，精确到小数点后16位"),ye=n("^-?(?:90(?:\\.0{1,16})?|(?:[1-8]?\\d(?:\\.\\d{1,16})?))$","纬度范围：-90~90，精确到小数点后16位"),Ee=n("^(([1-9]{1}[0-9]{0,3}))$","可输入1—9999中的任何数字"),Se=n("^(([1-9]\\d{0,9})|0)(\\.\\d{1,2})?$","支持10位数字，精确到小数点后俩位"),Te=n("^([1-9]\\d{0,4})?$","最大支持5位数字输入"),Ce=n("^([1-9]\\d{0,7})?$","最大支持8位数字输入"),Me=n("^([0-9a-fA-F]{2}[:-]){5}([0-9a-fA-F]{2})$","MAC地址格式不正确,格式如: 00:A3:19:EF:E4:24"),Pe=n(function(){var e="http, https, ftp".split(",").join("|").replace(/\s/g,"");return new RegExp("^(?:(?:"+e+")://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::\\d{2,5})?(?:/[^\\s]*)?$","i")}()),_e={validator:function(e,t,a){""===t&&a();var n,r=function(){return a(new Error("身份证号填写错误, 请重新填写"))};if(t=t.trim(),/^\d{15}$/.test(t)||/^\d{17}[\dXx]{1}$/.test(t)||r(),n=18===t.length?t.substr(6,8):"19"+t.substr(6,6),function(e,t,a,n){if(isNaN(e)||isNaN(t)||isNaN(a))return!1;if(a.length>2||t.length>2||e.length>4)return!1;if(a=parseInt(a,10),t=parseInt(t,10),(e=parseInt(e,10))<1e3||e>9999||t<=0||t>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];if((e%400==0||e%100!=0&&e%4==0)&&(r[1]=29),a<=0||a>r[t-1])return!1;if(!0===n){var i=new Date,d=i.getFullYear(),o=i.getMonth(),l=i.getDate();return e<d||e===d&&t-1<o||e===d&&t-1===o&&a<l}return!0}(parseInt(n.substr(0,4),10),parseInt(n.substr(4,2),10),parseInt(n.substr(6,2),10))||r(),18===t.length){for(var i=0,d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=0;o<17;o++)i+=parseInt(t.charAt(o),10)*d[o];i=(12-i%11)%11,("X"!==t.charAt(17).toUpperCase()?parseInt(t.charAt(17),10):10)===i?a():r()}a()},trigger:"change"},je=function(e,t,a,n){return a=a||"支持"+e+"~"+t+"位的中文、英文（大小写）、整数、下划线、中线、/、. 、空格等输入",{validator:function(n,r,i){void 0!=r&&""!=r||i(),new RegExp("^[a-zA-Z0-9_-/.sΑ-￥]{"+e+","+t+"}$").test(r)||i(new Error(a)),i()},trigger:n||"change"}},qe=je(1,30),ke=je(1,64);t.a={required:function(e,t){return{validator:function(t,a,n){$.isArray(a)?0===a.length?n(new Error(e||"此处为必填项")):n():""===a||void 0===a?n(new Error(e||"此处为必填项")):n()},required:!0,trigger:t||"change"}}(),account64:P,str16:g,str18:p,str20:h,str24:v,str25:b,str32:F,str36:I,str40:A,str45:w,str50:x,str64:z,str80:N,str100:V,str128:y,str150:E,str250:S,str1000:T,str1500:C,strDefault:M,isInt:he,int4:_,int5:j,int6:q,int10:k,int11:Z,int18:B,int20:R,int24:D,int25:G,int32:J,int36:W,int50:X,int64:H,int1_100:ve,num:d,num20:K,num99:L,num128:U,num100:O,num512:Y,num999:Q,num1000:ee,num3000:te,num3600:ae,num9999:ne,num99999:re,name:je,name30:qe,name64:ke,level:se,gbId:me,gbId2:ge,civilCode:pe,chanNo:Ae,id:_e,ip:Fe,multiIp:m,ip4gb:c,port:Ie,email:le,maxWay:$e,latitude:ye,longitude:Ve,password:ce,password2:fe,gbIdStep:ze,gbIdTimes:Ne,serviceSize:xe,cloudPersize:ue,extraChannelNo:we,presetPositions:Ee,deviceInfoPrice:Se,vodInCount6:Te,trunkInCount6:Te,platformNum:Ce,isNum:{type:"number",message:"必须为数字值"},macAddr:Me,phone:be,uri:Pe,ptzIdleTime:ie,projectNumber:de,nodeNumber:oe,remote:function(e){var t=e.id,a=e.name,n=e.api,r=e.apiPrefix,i=e.msg;return{validator:function(e,d,o){if(""===d)o();else{var l={};l[a]=d,t&&(l.id=t),Service[n](l,r).then(function(e){e.data.status?o(new Error(i||e.data.message)):o()},function(e){o(new Error(e.data.message))})}},trigger:"blur"}}}},"I+Ds":function(e,t,a){"use strict";t.a={data:function(){return{model:{},inline:!1,loading:!1}},props:{title:String},computed:{dialog:function(){return this.find("dialog")},renderInit:function(){return window.formFactoryRender.bind(this,this.fields,{})}},methods:{start:function(e){this.loading=!0,$.fire(e)},end:function(e){var t=this;$.fire(e),setTimeout(function(){t.loading=!1},200)},find:function(e){return $.ref.call(this,e)},closest:function(e){return $.pref.call(this,e)},getForm:function(){return this.$refs.formFactory.$refs.form},validate:function(e,t,a){var n=this;try{this.getForm().validate(function(a,r){if(!a)return t&&t.call(n,r),!1;e&&e.call(n)},a)}catch(e){console.log(e)}},submit:function(e){this.validate(this.saveAjax)},resetForm:function(e){this.getForm().resetFields(e||this.defModel)},close:function(){this.dialog.close(),this.tab&&(this.tab="first")}}}},tMv2:function(e,t,a){}}]);