(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7fca"],{"+GRL":function(e,t,n){"use strict";n.r(t);var i=n("QbLZ"),r=n.n(i),a=n("P2sY"),s=n.n(a),o=n("kKWf"),l=n("I+Ds"),c=n("BNNy"),d=n("m1cH"),u=n.n(d),f=n("/f1G"),h=n.n(f),p=n("4d7F"),m=n.n(p),v={props:{data:{type:Array,default:function(){return[]}},checked:{type:Array,default:function(){return[]}}},computed:{dataList:function(){return this.data},checkAll:{get:function(){return this.data.every(function(e){return e.isChecked})},set:function(e){this.data.forEach(function(t){return t.isChecked=e})}},isIndeterminate:function(){return 0!=this.data.filter(function(e){return e.isChecked}).length&&!this.data.every(function(e){return e.isChecked})}},methods:{handleCheckAllChange:function(e){},handleCheckedChange:function(){},getValue:function(){if(this.data.length){var e=this.data.filter(function(e){return e.isChecked}).map(function(e){return e.id});return e.length==this.data.length?"all":e}return[]}}},g=(n("4GRT"),n("KHd+")),C=Object(g.a)(v,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"monitor"},[e.dataList.length?n("div",{staticClass:"module"},[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate,border:"",size:"medium"},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全部监视器")]),e._v(" "),n("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),n("div",{staticClass:"monitor-box clearfix"},e._l(e.data,function(t){return n("div",{key:t.id,staticClass:"fl monitor-item"},[n("el-tooltip",{staticClass:"item",attrs:{content:t.name,effect:"light",placement:"top-start"}},[n("el-checkbox",{attrs:{border:"",size:"medium"},on:{change:e.handleCheckedChange},model:{value:t.isChecked,callback:function(n){e.$set(t,"isChecked",n)},expression:"item.isChecked"}},[e._v(e._s(t.name))])],1)],1)}))],1):n("div",{staticClass:"x-y-center-child empty-box"},[e._m(0)])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"info"},[t("i",{staticClass:"ico ico-empty-info"}),this._v(" "),t("div",{staticClass:"desc"},[this._v("尚无监视器数据")])])}],!1,null,null,null);C.options.__file="monitor.vue";var b=C.exports,y=n("EJiy"),k=n.n(y),F=n("GQeE"),x=n.n(F),w=n("LvDl"),I=n.n(w);window._=I.a;function _(e){var t=e.constructor===Array?[]:{};return x()(e).forEach(function(n){e[n]&&"object"===k()(e[n])?(t[n]=e[n].constructor===Array?[]:{},t[n]=_(e[n])):t[n]=e[n]}),t}var T=n("WIBD"),S={props:{checkedKeys:{type:Array,default:function(){return[]}},dataSet:{type:Array,default:function(){return[]}}},data:function(){return{defaultProps:{children:"children",label:"name"},allChecked:!1}},computed:r()({},Object(T.mapGetters)(["siteType"]),{expandKeys:function(){return this.list[0]&&[this.list[0].id]},list:function(){var e=$.array2tree(_(this.dataSet),"id","parentId")||[];if(e.length>0){!function e(t){for(var n=0;n<t.length;n++){var i=t[n];i.children&&i.children.length>0&&(e(i.children),i.children.find(function(e){return e.disabled&&1==e.disabled})&&s()(i,{disabled:!0}))}}(e)}return e},siteIds:function(){return this.dataSet.filter(function(e){return"Site"==e.nodeType}).map(function(e){return e.id})}}),watch:{checkedKeys:function(e){for(var t=0;t<this.siteIds.length;t++){var n=this.siteIds[t];if(!e.includes(n))return this.allChecked=!1}this.allChecked=!0}},methods:{filterParam:function(e){this.$refs.jtree.filter(e)},filterNode:function(e,t){if(!e.text&&!e.type.length)return!0;if(-1!==t.name.indexOf(e.text)){if("Site"==t.nodeType||"Zone"==t.nodeType)return!0;if(e.type.indexOf(t.deviceSubType)>-1)return!0}},changeAllCheckedFn:function(e){if(this.list.find(function(e){return 1==e.disabled}))return this.allChecked=!1,!1;this.$refs.jtree.setCheckedKeys(e?this.siteIds:[])},renderFn:function(e,t){var n=t.node,i=(t.data,this.$createElement),r=n.data,a=r.id,s=r.name,o=r.nodeType,l=r.deviceSubType,c=o&&o;return i("div",{attrs:{"data-id":a,"data-type":c},class:{node:!0}},[i("span",{class:["icon","icon-"+("Camera"==o?"Camera-"+l:"Zone"==c?"Zone":"Station")]}),i("span",{class:"node-name",attrs:{title:s}},[s])])},getChecked:function(){return this.$refs.jtree.getCheckedKeys()},getCheckedNodes:function(){return this.$refs.jtree.getCheckedNodes()},getValue:function(){var e=[],t=[],n=[];if(this.allChecked)return{Camera:e,Civil:t,Site:this.siteIds};for(var i=this.$refs.jtree.getCheckedKeys(),r=this.$refs.jtree.getCheckedNodes(),a=this.dataSet.filter(function(e){return e.disabled}),s=a.length?a.map(function(e){return e.id}):[],o=0;o<r.length;o++){var l=r[o];"Camera"==l.nodeType?i.indexOf(l.parent.id)>-1||s.length>0&&s.indexOf(l.id)>-1||e.push(l.id):"Site"==l.nodeType?n.push(l.id):i.indexOf(l.parent.id)>-1||t.push(l.id)}return{Camera:e,Civil:t,Site:n}},checkChangeFn:function(e,t){var n=this.$parent.$parent.$parent;"first"==n.tab&&n.tabClickFn();var i=this.$refs.jtree.getCheckedNodes().filter(function(e){return"Site"==e.nodeType});this.allChecked=i.length==this.siteIds.length}}},A=(n("voo9"),Object(g.a)(S,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"temp-tree"},[n("div",{staticClass:"box-all"},["OCC"==e.siteType?n("el-checkbox",{on:{change:e.changeAllCheckedFn},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("全部站点")]):e._e()],1),e._v(" "),n("el-tree",{ref:"jtree",attrs:{"default-expanded-keys":e.expandKeys,"default-checked-keys":e.checkedKeys,props:e.defaultProps,data:e.list,"render-content":e.renderFn,"filter-node-method":e.filterNode,"show-checkbox":"","auto-expand-parent":"","node-key":"id"},on:{"node-click":e.nodeClickFn,"check-change":e.checkChangeFn}})],1)},[],!1,null,null,null));A.options.__file="accessTree.vue";var z={components:{Monitor:b,AccessTree:A.exports},data:function(){return{loading:!1,tab:"first",realFilterType:["1","2","3"],realFilterTypes:[{value:"1",text:"球机"},{value:"2",text:"半球"},{value:"3",text:"枪机"}],realFilterText:"",ptzFilterText:"",showRealFilter:!1,showPtzFilter:!1,ptzList:[],ptzChecked:[],realList:[],realChecked:[],monitorList:[],monitorChecked:[]}},computed:{isNotBJVMS:function(){return 0==$.db.getBJVMS()}},methods:{changePtzFilter:function(){this.$refs.ptzTree&&this.$refs.ptzTree.filterParam(s()({},{type:["1"],text:this.ptzFilterText}))},changeFilter:function(){this.$refs.realTree.filterParam(s()({},{type:this.realFilterType,text:this.realFilterText}))},init:function(e,t){var n=this;this.loading=!0,m.a.all([Service.listZoneAndCameraInfo({siteId:e.siteId}),Service.listDevice4Type({siteId:e.siteId,deviceType:"Monitor"})]).then(function(e){if(n.ptzList=e[0].items.filter(function(e){return"Camera"!=e.nodeType||1==e.deviceSubType}).slice(0),n.realList=e[0].items.slice(0),t){var i=JSON.parse(t);n.monitorChecked="all"==i.monitor?e[1].items.map(function(e){return e.id}):i.monitor,n.realChecked=[],h()(i.real).forEach(function(e){var t;return(t=n.realChecked).push.apply(t,u()(e))}),n.ptzChecked=[],h()(i.ptz).forEach(function(e){var t;return(t=n.ptzChecked).push.apply(t,u()(e))})}n.monitorList=e[1].items.map(function(e){return s()({},e,{isChecked:n.monitorChecked.indexOf(e.id)>-1})}),n.loading=!1,n.$nextTick(function(){return n.tabClickFn()})})},getValue:function(){return{monitor:this.$refs.monitorTree.getValue(),real:this.$refs.realTree.getValue(),ptz:this.$refs.ptzTree?this.$refs.ptzTree.getValue():{Camera:[],Civil:[],Site:this.ptzList.filter(function(e){return"Site"==e.nodeType}).map(function(e){return e.id})}}},tabClickFn:function(e,t){var n=this.$refs.realTree.getCheckedNodes().map(function(e){return e.id}),i=this.$refs.ptzTree?this.$refs.ptzTree.getCheckedNodes().filter(function(e){if($.isEmptyFn(e.disabled)||0==e.disabled)return e}).map(function(e){return e.id}):[],r=_(this.ptzList);this.ptzList=r.map(function(e){return"Camera"==e.nodeType&&n.indexOf(e.id)<0?s()(e,{disabled:!0}):s()(e,{disabled:!1})}),this.ptzChecked=i}}},j=(n("eVOC"),Object(g.a)(z,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"edit-permission"},[n("el-tabs",{on:{"tab-click":e.tabClickFn},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("el-tab-pane",{attrs:{label:"实时视频",name:"first"}},[n("template",{slot:"label"},[n("div",{staticClass:"filter-field"},[n("div",{staticClass:"wrap-icon"},[n("i",[e._v("实时视频")]),e._v(" "),n("i",{staticClass:"icon icon-filter",on:{click:function(t){e.showRealFilter=!e.showRealFilter}}})])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showRealFilter,expression:"showRealFilter"}],staticClass:"filter-content"},[n("div",{staticStyle:{position:"relative",height:"40px","line-height":"40px",width:"400px"}},[n("span",{staticClass:"label-txt",staticStyle:{position:"absolute",left:"0"}},[e._v("名称：")]),e._v(" "),n("el-input",{staticStyle:{position:"absolute",width:"70%",left:"80px"},attrs:{placeholder:"请输入检索信息",clearable:""},on:{change:e.changeFilter},model:{value:e.realFilterText,callback:function(t){e.realFilterText=t},expression:"realFilterText"}})],1)]),e._v(" "),n("div",{class:["tree-wrap",{height_40:e.showRealFilter}]},[n("access-tree",{ref:"realTree",attrs:{dataSet:e.realList,checkedKeys:e.realChecked}})],1)],2),e._v(" "),e.isNotBJVMS?n("el-tab-pane",{attrs:{label:"云台控制",name:"second"}},[n("template",{slot:"label"},[n("div",{staticClass:"filter-field"},[n("div",{staticClass:"wrap-icon"},[n("i",[e._v("云台控制")]),e._v(" "),n("i",{staticClass:"icon icon-filter",on:{click:function(t){e.showPtzFilter=!e.showPtzFilter}}})])])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPtzFilter,expression:"showPtzFilter"}],staticClass:"filter-content"},[n("div",{staticStyle:{position:"relative",height:"40px","line-height":"40px",width:"400px"}},[n("span",{staticClass:"label-txt",staticStyle:{position:"absolute",left:"0"}},[e._v("名称：")]),e._v(" "),n("el-input",{staticStyle:{position:"absolute",width:"70%",left:"80px"},attrs:{placeholder:"请输入检索信息",clearable:""},on:{change:e.changePtzFilter},model:{value:e.ptzFilterText,callback:function(t){e.ptzFilterText=t},expression:"ptzFilterText"}})],1)]),e._v(" "),n("access-tree",{ref:"ptzTree",attrs:{dataSet:e.ptzList,checkedKeys:e.ptzChecked}})],2):e._e(),e._v(" "),n("el-tab-pane",{attrs:{label:"监视器权限",name:"third"}},[n("monitor",{ref:"monitorTree",attrs:{data:e.monitorList,checked:e.monitorChecked}})],1)],1)],1)},[],!1,null,null,null));j.options.__file="editPermit.vue";var N=j.exports,E={name:"EditForm",mixins:[l.a],props:{title:{type:String,default:""},flag:{type:String,default:""}},data:function(){return{isShow:!1,model:{},option:{}}},computed:{jtree:function(){return this.closest("jtree")},jtable:function(){return this.closest("jtable")},fields:function(){return $.formatFinal(function(e){return[{tag:"el-input",name:"name",label:"角色名称",tip:["请保证同一节点内， 角色名称唯一"],data:{props:{disabled:!!e.model.id}},rules:[c.a.required,c.a.str64],createFunction:"formItem"},{tag:"div",data:{class:{"form-title":!0}},children:["权限设置"]},{tag:"el-switch",name:"record",label:"允许录像文件检索与回放",default:!0,change:function(t){t||(e.model.download=!1)},data:{props:{activeValue:!0,inactiveValue:!1,activeText:"开",inactiveText:"关"}},createFunction:"formItem"},{tag:"el-switch",name:"download",label:"允许录像文件下载",change:function(t){e.model.record=t},default:!0,data:{props:{activeValue:!0,inactiveValue:!1,activeText:"开",inactiveText:"关"}},createFunction:"formItem"},{tag:"el-switch",name:"map",label:"允许查看地图",default:!0,data:{props:{activeValue:!0,inactiveValue:!1,activeText:"开",inactiveText:"关"}},createFunction:"formItem"},{tag:"el-input",type:"textarea",name:"ip",label:"IP地址",desc:"多个IP段间，请用逗号隔开",tip:["允许客户端登录的IP地址","填写格式: IP段间请用逗号隔开，且结尾不要有逗号","如：192.168.12.55,192.168.12.20-30,192.168.12.*,192.168.*.20,192.168.*.*"],rules:[c.a.multiIp],createFunction:"formItem"},{tag:N,name:"access",label:"权限选择",createFunction:"comp",data:{ref:"editPermit",props:{type:"role",model:e.model}}}]}(this),null,this.option,!0)}},methods:{editPermit:function(){return this.$refs.formFactory.$refs.editPermit},setData:function(e,t){var n=this;$.initForm({model:e,ajax:[[Service.listRole,{id:e.id,siteId:e.siteId},"put"]],events:[function(e){n.option={type:{name:"text",value:"id",list:$.db.getConsts().siteType.filter(function(e){return 1==e.id||3==e.id})}}},{method:"put",fn:function(e){n.data=e[0].data}},{method:"post",fn:function(t){n.data=e}},function(){$.fire(t,n.data)}]})},open:function(e){var t=this;this.model=this.defModel=$.extend(!0,{},$.modelTpl(this.fields)),this.dialog.open(function(){t.setData(e,function(e){var n={id:e.id,siteId:e.siteId};if(n.id){var i=JSON.parse(e.access),r=i.download,a=i.record,o=i.map,l=i.ip;$.copyValue(n,$.extend(e,{download:r,ip:l,record:a,map:o}),t.fields)}else s()(n,$.modelTpl(t.fields,t.option));t.model=$.extend(!0,{},n),t.dialog.end(),t.$nextTick(function(){return t.editPermit().init(t.model,e.access)})})})},getFormValue:function(){var e=this,t=s()({},this.editPermit().getValue()),n={id:this.data.id,siteId:this.model.siteId};return this.fields.forEach(function(i){i.name&&(["download","record","ip","map"].indexOf(i.name)>-1?t[i.name]=e.model[i.name]:n[i.name]=e.model[i.name])}),s()(n,{access:t})},saveAjax:function(){var e=this;this.start(function(){var t=e.getFormValue();Service[e.model.id?"editRole":"addRole"](t).then(function(t){e.$message.success("操作成功"),e.jtree.init().then(function(){return e.$parent.refreshFn()}),e.close(),e.$store.dispatch("CheckSession")}).finally(e.end)})}}},P=(n("bDJs"),Object(g.a)(E,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nv-dialog",{ref:"dialog",staticClass:"role-dialog",attrs:{title:e.title}},[n("div",{staticClass:"form-content"},[n("form-factory",{ref:"formFactory",attrs:{init:e.renderInit}},[n("el-form-item",[n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.submit}},[e._v("确定")]),e._v(" "),n("el-button",{on:{click:e.close}},[e._v("取消")])],1)],1)],1)])},[],!1,null,null,null));P.options.__file="dialog.vue";var R={components:{EditForm:P.exports},mixins:[o.a],data:function(){this.$createElement;var e=this;return{legend:[{icon:"selected",txt:"允许"},{icon:"unselected",txt:"禁止"},{icon:"whole",txt:"全部选中"},{icon:"part",txt:"部分选中"},{icon:"none",txt:"无"}],title:"新建角色",filter:{},prevNodeKey:null,treeSetting:{showFilter:!1,nodeKey:"siteId",props:{children:"children",label:"siteName"},initNodeFn:function(t){var n=e.prevNodeKey?[e.prevNodeKey]:[t[0][this.nodeKey]];e.jtree.curNodeKeys=n,e.jtree.setCurrentNode(n[0])},ajax:{init:function(){return Service.listSiteTree({type:"UserRole"}).then(function(e){return e.items})}},nodeClickFn:function(t,n){e.prevNodeKey=t.siteId,e.jtable.clear(function(){return e.refreshFn(t)})},renderFn:function(e,t){t.node;var n=t.data,i=this.$createElement;return i("div",{class:{node:!0,"data-key":n.siteId}},[i("span",{class:["icon","icon-"+n.siteType]}),i("span",[n.siteName]),i("span",{class:"count"},["(",n.count,")"])])}},gridConfig:{clz:"role-grid",selectable:!0,pagination:!0,expandable:!0,listenerWidth:"90px",actions:[{name:"refresh",icon:"icon icon-refresh",title:"刷新",handleFn:function(t){e.refreshFn()}},{name:"create",icon:"el-icon-edit-outline",title:"新建",handleFn:function(t){e.title="新建角色";var n=e.jtree.getActive().siteId;e.dialog.open({siteId:n})}},{name:"batchDel",icon:"el-icon-delete",title:"批量删除",handleFn:function(){e.delFn()}}],listeners:[{name:"edit",icon:"el-icon-edit",title:"编辑",handleFn:function(t){e.title="编辑角色",e.dialog.open(t)}},{name:"delete",icon:"el-icon-delete",title:"删除",handleFn:function(t){e.delFn(t)}}],column:[{type:"index",name:"序号",width:"60",minWidth:"50"},{key:"name",name:"角色名称",sortable:!0,minWidth:"120"},{key:"access",name:"录像文件检索与回放",format:function(t){return e.getIcon(t,"record")}},{key:"access",name:"录像文件下载",format:function(t){return e.getIcon(t,"download")}},{key:"access",name:"查看地图",format:function(t){return e.getIcon(t,"map")}},{key:"access",name:"实时视频",format:function(t){return e.getIcon(t,"real")}},{key:"access",name:"云台控制",format:function(t){return e.getIcon(t,"ptz")}},{key:"access",name:"监视器权限",format:function(t){return e.getIcon(t,"monitor")}}],ajax:{init:function(t){var n=e.jtree.getActive().siteId;return Service.listRole(s()({},t,e.filter,{siteId:n})).then(function(e){return e})}}}}},computed:r()({sites:function(){return $.db.getSites()},jtree:function(){return this.$refs.jtree},jtable:function(){return this.$refs.jtable},dialog:function(){return this.$refs.dialog},copyDialog:function(){return this.$refs.copyDialog}},Object(T.mapGetters)(["siteType"]),{curNode:function(){return this.$refs.jtree.$refs.tree.getCurrentNode()}}),mounted:function(){var e=this;this.jtree.init().then(function(){return e.refreshFn()})},methods:{getLimitIP:function(e){var t=JSON.parse(e);return $.isEmptyFn(t.ip)?"暂无":t.ip},getIcon:function(e,t){var n=JSON.parse(e),i="";switch(t){case"monitor":i="all"==n[t]?"whole":n[t].length?"part":"none";break;case"real":case"ptz":i="OCC"==this.curNode.siteType?n[t].Site.length==this.sites.length?"whole":n[t].Site.length||n[t].Civil.length||n[t].Camera.length?"part":"none":n[t]?n[t].Site.length?"whole":n[t].Civil.length||n[t].Camera.length?"part":"none":"none";break;case"map":case"download":case"record":i=n[t]?"selected":$.isEmptyFn(n[t])?"":"unselected"}return'<i class="icon icon-'+i+'"></i>'},refreshFn:function(){this.jtable.init()},delFn:function(e){var t=this,n=[e];if(!e&&!(n=this.jtable.getChecked()).length)return this.$message({message:"请至少选择一条信息",type:"warning"});this.$confirm("确认要删除吗？","提示",{type:"warning"}).then(function(){Service.delRole({ids:n.map(function(e){return e.id})}).then(function(e){t.$message.success("删除成功"),t.query()})},function(){return t.$message.warning("操作取消")})}}},L=(n("IH+r"),Object(g.a)(R,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-role clearfix"},[n("div",{staticClass:"sidebar fl"},[n("nv-tree",{ref:"jtree",attrs:{setting:e.treeSetting}})],1),e._v(" "),n("div",{staticClass:"main fl"},[n("nv-table",{ref:"jtable",attrs:{setting:e.gridConfig},scopedSlots:e._u([{key:"expandTpl",fn:function(t){return n("div",{staticClass:"expand-tpl"},[n("p",{staticClass:"limit-access-ip"},[n("span",{staticClass:"label"},[e._v("客户端限制IP：")]),e._v(" "),n("span",[e._v(e._s(e.getLimitIP(t.info.access)))])])])}}])},[n("template",{slot:"filter"},[n("span",{staticClass:"txt"},[e._v("图例：")]),e._v(" "),e._l(e.legend,function(t,i){return n("span",{key:i,staticClass:"legend"},[n("i",{class:"icon icon-"+t.icon}),e._v(" "),n("i",{staticClass:"txt"},[e._v(e._s(t.txt))])])})],2)],2)],1),e._v(" "),n("edit-form",{ref:"dialog",attrs:{title:e.title}})],1)},[],!1,null,null,null));L.options.__file="index.vue";t.default=L.exports},"4GRT":function(e,t,n){"use strict";var i=n("LSa8");n.n(i).a},BNNy:function(e,t,n){"use strict";var i=function(e,t,n,i){return{pattern:"string"==typeof e?new RegExp(e,i):e,message:t||"输入格式不匹配",trigger:n||"change"}},r=function(e,t,n,r){return i("^.{"+e+","+t+"}$",n,"change",r)},a=function(e,t,n){return i("^[0-9]{"+e+","+t+"}$",n)},s=function(e,t,n,i){return{validator:function(i,r,a){""===r&&a(),r+="";var s=parseInt(r);r.length===(s+"").length&&e<=s&&s<=t?a():a(new Error(n||$.tpl("请输入{min} ~ {max}范围内的整数",{min:e,max:t})))},trigger:i||"change"}},o=function(e){return $.tpl("限制{size}位字符输入",{size:e})},l=function(e){return $.tpl("仅支持数字输入，限制最大输入{size}位字符，最小为1位字符",{size:e})},c=/^[0-9]{20}$/,d=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,u={validator:function(e,t,n){""===t&&n(),c.test(t)?n():d.test(t)?n():n(new Error("IP地址格式不正确"))},trigger:"change"},f=/^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){4}$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.((25[0-5]|2[0-4]\d|[01]?\d\d?))$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){2}\*\.\*$|^((25[0-5]|2[0-4]\d|[01]?\d\d?)($|(?!\.$)\.)){3}((25[0-5]|2[0-4]\d|[01]?\d\d?))\-((25[0-5]|2[0-4]\d|[01]?\d\d?))$/,h={validator:function(e,t,n){""===t&&n();for(var i=t.trim().split(/,|，/),r=0,a=0;a<i.length;a++)f.test(i[a])||r++;r>0?n(new Error("IP格式错误")):n()},trigger:"change"},p=r(1,16,o(16)),m=r(1,18,o(18)),v=r(1,20,o(20)),g=r(1,24,o(24)),C=r(1,25,o(25)),b=r(1,32,o(32)),y=r(1,36,o(36)),k=r(1,40,o(40)),F=r(1,45,o(45)),x=r(1,50,o(50)),w=r(1,64,o(64)),I=r(1,80,o(80)),_=r(1,100,o(100)),T=r(1,128,o(128),"m"),S=r(1,150,o(150)),A=r(1,250,o(250)),z=r(1,1e3,o(1e3)),j=r(1,1500,o(1500)),N=r(1,45,o(45)),E=function(e,t,n,r){return i("^[a-zA-Z0-9/_-]{"+e+","+t+"}$",n,"change",r)}(1,64,"仅允许输入字母、数字、下划线、中线、以及 / 输入，长度范围 1 ~ 64 位"),P=a(1,4,l(4)),R=a(1,5,l(5)),L=a(1,6,l(6)),O=a(1,10,l(10)),D=a(1,11,l(11)),V=a(1,18,l(18)),K=a(1,20,l(20)),Z=a(1,24,l(24)),G=a(1,25,l(25)),J=a(1,32,l(32)),U=a(1,36,l(36)),M=a(1,50,l(50)),B=a(1,64,l(64)),W=s(5,20),X=s(1,99),q=s(1,100),H=s(0,128),Q=s(1,512),Y=s(1,999),ee=s(1,1e3),te=s(1,3e3),ne=s(1,3600),ie=s(1,9999),re=s(1,99999),ae=s(5,60,"可输入5-60中的任何数字"),se=i("^(([1-9]{1}[0-9]{0,6}))$","可输入1—9999999中的任何数字"),oe=i("^(([1-9]{1}[0-9]{0,5}))$","可输入1—999999中的任何数字"),le=i(/^(([^<>()[\]\\.,;:\s@\\"]+(\.[^<>()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,"邮箱格式不正确"),ce=i("^(([1-9]{1}[0-9]{0,3})|10000|0)$","可输入0—10000中的任何数字，0的级别最小，10000的级别最大"),de=i("^(([1-9]\\d{0,4})|0)(\\.\\d{1,2})?$","支持数字输入，支持小数点后2位，最大支持小数点前4位数字输入，最大9999G"),ue=i("^[^&#\\s一-龥]{1,30}$","支持1 ~ 30位，除了中文、 空格、' & '、 '#' 以外的字符输入"),fe=i("^[a-zA-Z0-9_]{1,30}$","密码由数字、字母、下划线组成，长度为1~30位"),he=i(/^[0-9]{1,20}$/,"请输入1~20位长度的数字"),pe=i(/^\d{13}$|^\d{20}$/,"请输入13或20位长度的数字"),me=i(/^\d{1,20}$/,"请输入1~20位长度的数字"),ve=i(/^[1-9]\d*$/,"仅支持输入非零整数"),ge=i(/^[1-9]\d?$|^100$/,"仅支持输入非零整数, 数字范围1~100"),$e=s(0,1e3,"仅支持数字输入，默认为4，不输入数字则不做限制，最大可设1000路"),Ce=i(/^[0-9\\-]{1,20}$/,"电话号码格式不正确,例如 010-82325561, 支持20位输入"),be=i(d,"IP地址格式不正确"),ye=s(1,65535,"端口号请输入1到65535的整数"),ke=i("^(([1-9]{1}[0-9]{0,4}))$|^[0-9]{20}$","可输入1—99999中的任何数字，或20位的国标编号"),Fe=i("^(([1-9]{1}[0-9]{0,4}))$","可输入1—99999中的任何数字"),xe=i("^(([1-9]\\d{0,19})|0)(\\.\\d{1,2})?$","支持20位数字，精确到小数点后俩位"),we=i("^(([1-9]{1}[0-9]{0,2}))$|^1000$","可输入1—1000中的任何数字"),Ie=i("^([1-9]{1}[0-9]{0,2})$|^([1-2]{1})([0-9]{0,3})$|^3000$","可输入1—3000中的任何数字"),_e=i("^-?(?:(?:180(?:\\.0{1,16})?)|(?:(?:(?:1[0-7]\\d)|(?:[1-9]?\\d))(?:\\.\\d{1,16})?))$","经度范围：-180~180，精确到小数点后16位"),Te=i("^-?(?:90(?:\\.0{1,16})?|(?:[1-8]?\\d(?:\\.\\d{1,16})?))$","纬度范围：-90~90，精确到小数点后16位"),Se=i("^(([1-9]{1}[0-9]{0,3}))$","可输入1—9999中的任何数字"),Ae=i("^(([1-9]\\d{0,9})|0)(\\.\\d{1,2})?$","支持10位数字，精确到小数点后俩位"),ze=i("^([1-9]\\d{0,4})?$","最大支持5位数字输入"),je=i("^([1-9]\\d{0,7})?$","最大支持8位数字输入"),Ne=i("^([0-9a-fA-F]{2}[:-]){5}([0-9a-fA-F]{2})$","MAC地址格式不正确,格式如: 00:A3:19:EF:E4:24"),Ee=i(function(){var e="http, https, ftp".split(",").join("|").replace(/\s/g,"");return new RegExp("^(?:(?:"+e+")://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-?)*[a-z\\u00a1-\\uffff0-9])*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))?)(?::\\d{2,5})?(?:/[^\\s]*)?$","i")}()),Pe={validator:function(e,t,n){""===t&&n();var i,r=function(){return n(new Error("身份证号填写错误, 请重新填写"))};if(t=t.trim(),/^\d{15}$/.test(t)||/^\d{17}[\dXx]{1}$/.test(t)||r(),i=18===t.length?t.substr(6,8):"19"+t.substr(6,6),function(e,t,n,i){if(isNaN(e)||isNaN(t)||isNaN(n))return!1;if(n.length>2||t.length>2||e.length>4)return!1;if(n=parseInt(n,10),t=parseInt(t,10),(e=parseInt(e,10))<1e3||e>9999||t<=0||t>12)return!1;var r=[31,28,31,30,31,30,31,31,30,31,30,31];if((e%400==0||e%100!=0&&e%4==0)&&(r[1]=29),n<=0||n>r[t-1])return!1;if(!0===i){var a=new Date,s=a.getFullYear(),o=a.getMonth(),l=a.getDate();return e<s||e===s&&t-1<o||e===s&&t-1===o&&n<l}return!0}(parseInt(i.substr(0,4),10),parseInt(i.substr(4,2),10),parseInt(i.substr(6,2),10))||r(),18===t.length){for(var a=0,s=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=0;o<17;o++)a+=parseInt(t.charAt(o),10)*s[o];a=(12-a%11)%11,("X"!==t.charAt(17).toUpperCase()?parseInt(t.charAt(17),10):10)===a?n():r()}n()},trigger:"change"},Re=function(e,t,n,i){return n=n||"支持"+e+"~"+t+"位的中文、英文（大小写）、整数、下划线、中线、/、. 、空格等输入",{validator:function(i,r,a){void 0!=r&&""!=r||a(),new RegExp("^[a-zA-Z0-9_-/.sΑ-￥]{"+e+","+t+"}$").test(r)||a(new Error(n)),a()},trigger:i||"change"}},Le=Re(1,30),Oe=Re(1,64);t.a={required:function(e,t){return{validator:function(t,n,i){$.isArray(n)?0===n.length?i(new Error(e||"此处为必填项")):i():""===n||void 0===n?i(new Error(e||"此处为必填项")):i()},required:!0,trigger:t||"change"}}(),account64:E,str16:p,str18:m,str20:v,str24:g,str25:C,str32:b,str36:y,str40:k,str45:F,str50:x,str64:w,str80:I,str100:_,str128:T,str150:S,str250:A,str1000:z,str1500:j,strDefault:N,isInt:ve,int4:P,int5:R,int6:L,int10:O,int11:D,int18:V,int20:K,int24:Z,int25:G,int32:J,int36:U,int50:M,int64:B,int1_100:ge,num:s,num20:W,num99:X,num128:H,num100:q,num512:Q,num999:Y,num1000:ee,num3000:te,num3600:ne,num9999:ie,num99999:re,name:Re,name30:Le,name64:Oe,level:ce,gbId:he,gbId2:pe,civilCode:me,chanNo:ke,id:Pe,ip:be,multiIp:h,ip4gb:u,port:ye,email:le,maxWay:$e,latitude:Te,longitude:_e,password:ue,password2:fe,gbIdStep:we,gbIdTimes:Ie,serviceSize:xe,cloudPersize:de,extraChannelNo:Fe,presetPositions:Se,deviceInfoPrice:Ae,vodInCount6:ze,trunkInCount6:ze,platformNum:je,isNum:{type:"number",message:"必须为数字值"},macAddr:Ne,phone:Ce,uri:Ee,ptzIdleTime:ae,projectNumber:se,nodeNumber:oe,remote:function(e){var t=e.id,n=e.name,i=e.api,r=e.apiPrefix,a=e.msg;return{validator:function(e,s,o){if(""===s)o();else{var l={};l[n]=s,t&&(l.id=t),Service[i](l,r).then(function(e){e.data.status?o(new Error(a||e.data.message)):o()},function(e){o(new Error(e.data.message))})}},trigger:"blur"}}}},Gd76:function(e,t){e.exports=function(e,t,n){var i=new Blob([e],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(i,t);else{var r=window.URL.createObjectURL(i),a=document.createElement("a");a.style.display="none",a.href=r,a.setAttribute("download",t),void 0===a.download&&a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}}},"I+Ds":function(e,t,n){"use strict";t.a={data:function(){return{model:{},inline:!1,loading:!1}},props:{title:String},computed:{dialog:function(){return this.find("dialog")},renderInit:function(){return window.formFactoryRender.bind(this,this.fields,{})}},methods:{start:function(e){this.loading=!0,$.fire(e)},end:function(e){var t=this;$.fire(e),setTimeout(function(){t.loading=!1},200)},find:function(e){return $.ref.call(this,e)},closest:function(e){return $.pref.call(this,e)},getForm:function(){return this.$refs.formFactory.$refs.form},validate:function(e,t,n){var i=this;try{this.getForm().validate(function(n,r){if(!n)return t&&t.call(i,r),!1;e&&e.call(i)},n)}catch(e){console.log(e)}},submit:function(e){this.validate(this.saveAjax)},resetForm:function(e){this.getForm().resetFields(e||this.defModel)},close:function(){this.dialog.close(),this.tab&&(this.tab="first")}}}},"IH+r":function(e,t,n){"use strict";var i=n("d1iW");n.n(i).a},LSa8:function(e,t,n){},UvMG:function(e,t,n){},bDJs:function(e,t,n){"use strict";var i=n("hXU1");n.n(i).a},csQX:function(e,t,n){},d1iW:function(e,t,n){},eVOC:function(e,t,n){"use strict";var i=n("UvMG");n.n(i).a},hXU1:function(e,t,n){},kKWf:function(e,t,n){"use strict";var i=n("Gd76"),r=n.n(i);t.a={data:function(){return{downLoading:!1}},methods:{timeRangeChangeFn:function(){var e=this.filter.timeRange,t=[$.getCurDay().from,$.getCurDay().to];return $.isEmptyFn(e)?this.filter.timeRange=["",""]:this.filter.timeRange.every(function(e){return 0==e})?this.filter.timeRange=t:this.filter.timeRange=this.filter.timeRange.map(function(e){return e instanceof Date?$.Date.getTickInSec(e):e})},clearFilter:function(e,t){for(var n in this.filter)this.filter[n]="timeRange"==n?[$.getCurDay().from,$.getCurDay().to]:e&&e[n]||"";t&&t()},query:function(){var e=this;this.jtable.clear(function(){e.jtable.init()})},download:function(e,t){var n=this;this.downLoading=!0,Service[e](t||this.filter).then(function(e){n.downLoading=!1;var t=e.headers["content-disposition"],i=decodeURI(t.match(/filename=(.*)/)[1],"UTF-8");r()(e.data,i)})}}}},voo9:function(e,t,n){"use strict";var i=n("csQX");n.n(i).a}}]);